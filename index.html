		    
			<html>
			<head>
				<title>URA Car Park Map</title>
				<script src='https://api.mapbox.com/mapbox-gl-js/v0.44.2/mapbox-gl.js'></script>
				<link href='https://api.mapbox.com/mapbox-gl-js/v0.44.2/mapbox-gl.css' rel='stylesheet' />
				<link rel="stylesheet" type="text/css" href="uramap.css">
			</head>
			
			<body>

				<script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.2.0/mapbox-gl-geocoder.min.js'></script>
				<link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.2.0/mapbox-gl-geocoder.css' type='text/css' />
				<div id='map'></div>
					<div class='map-overlay' id='features'><h2>URA car parks</h2><div id='pd'><p>Loading...</p></div></div>
					<div class='map-overlay' id='legend'></div>

			<script>
			mapboxgl.accessToken = 'pk.eyJ1IjoibWVycnV2ZWVuIiwiYSI6ImNqaWJ2YnI2MzFtYTMzcG5ibTc5eGN1bDMifQ.ngaxrHtoh714BH73TK1ZcA';

				// Set max boundary to Singapore
			var bounds = [
    			[103.575076, 1.211711], // Southwest 
    			[104.040622, 1.482174]  // Northeast 
				];

			var map = new mapboxgl.Map({
  				container: 'map', // container id
  				style: 'mapbox://styles/merruveen/cjibvtt4j06qh2sp6b8xh55v2',
  				maxBounds: bounds 
			});

			/*you don't need pants for the victory dance
			cuz baboon's better than weasel  
			(=ↀωↀ=)✧ */
			//disable map rotate
			map.dragRotate.disable();

			map.on('load', function() {
  				var layers = ['Parking.sg', 'EPS'];
				var colors = ['#5DEA0B', '#ED4112'];

				for (i = 0; i < layers.length; i++) {
  				var layer = layers[i];
  				var color = colors[i];
				var item = document.createElement('div');
				var key = document.createElement('span');
				key.className = 'legend-key';
				key.style.backgroundColor = color;

				var value = document.createElement('span');
				value.innerHTML = layer;
				item.appendChild(key);
				item.appendChild(value);
				legend.appendChild(item);
				}
			});

			map.on('mousemove', function(e) {
  				var states = map.queryRenderedFeatures(e.point, {
    			layers: ['all-ura-cps']
  			});

  			if (states.length > 0) {
    			document.getElementById('pd').innerHTML = '<h3><strong>' + states[0].properties.NAME + '</strong></h3><p><strong><em>' +states[0].properties.PP_CODE + '</strong></em></p>';
  			} else {
    			document.getElementById('pd').innerHTML = '<p>Search by Road Name or hover over a polygon.</p>';
  				}
			});

			map.addControl(new MapboxGeocoder({
    		accessToken: mapboxgl.accessToken
			}));

			</script>
			</body>
			</html>

		